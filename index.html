<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz Game</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<!-- Firebase App (compat version) -->
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
<!-- Firestore (compat version) -->
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>

  <script type="module">
	let currentAnswer = "FOOD POVERTY"; // original with spaces
	let normalizedAnswer = currentAnswer.replace(/\s+/g, "").toUpperCase();
	let progressIndex = 0;
	let builtAnswer = "";

function startUnscramble(questionNumber) {
  document.getElementById("unscrambleArea").innerHTML = "";
  document.getElementById("answerArea").innerHTML = "???";
  progressIndex = 0;
  builtAnswer = "";

  normalizedAnswer = answers[questionNumber].replace(/\s+/g, "").toUpperCase();
  currentAnswer = answers[questionNumber].toUpperCase();

  const scrambledLetters = normalizedAnswer.split("").sort(() => Math.random() - 0.5);

  scrambledLetters.forEach(letter => {
    const btn = document.createElement("button");
    btn.textContent = letter;
    btn.onclick = () => handleLetterClick(letter, btn, questionNumber);
    document.getElementById("unscrambleArea").appendChild(btn);
  });
}


function handleLetterClick(letter, btn, questionNumber) {
  const expectedLetter = normalizedAnswer[progressIndex];

  if (letter !== expectedLetter) {
    showPopup("Wrong answer! Try again.");
    return;
  }

  btn.disabled = true;
  btn.style.visibility = "hidden";
  builtAnswer += letter;
  progressIndex++;

  // Show progress with restored spaces
  const displayAnswer = restoreSpaces(currentAnswer, builtAnswer);
  document.getElementById("answerArea").textContent = displayAnswer;

  if (progressIndex === normalizedAnswer.length) {
    showPopup("Congratulations! You spelled it correctly. Press OK to send your answer to the screen.");
    sendData(questionNumber);
  }
}

// Helper: restore spaces from original answer
function restoreSpaces(original, built) {
  let result = "";
  let builtIndex = 0;
  for (let i = 0; i < original.length; i++) {
    if (original[i] === " ") {
      result += " ";
    } else {
      result += built[builtIndex] || "";
      builtIndex++;
    }
  }
  return result;
}
  
  async function sendData(questionNumber) {
    try {
      await db.collection("submissions").add({
        tableNumber: parseInt(document.getElementById("tableNumber").value, 10),
        questionNumber: questionNumber,
        timestamp: firebase.firestore.Timestamp.now()
      });
      console.log("Data sent!");
	  goBack();
    } catch (e) {
      console.error(e);
      goBack();
    }
  }
  
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    // Replace with your Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyCv6nPwgzTl7qDNSZ1MkpoGAOHyxpkKL4s",
		authDomain: "quizapp-cf724.firebaseapp.com",
		databaseURL: "https://quizapp-cf724-default-rtdb.asia-southeast1.firebasedatabase.app",
		projectId: "quizapp-cf724",
		storageBucket: "quizapp-cf724.firebasestorage.app",
		messagingSenderId: "948696897116",
		appId: "1:948696897116:web:8d8bf48e0b818ace0ef899",
		measurementId: "G-MLNBNFC70Y"
    };

    // Initialize Firebase
  firebase.initializeApp(firebaseConfig);

  // Initialize Firestore
  const db = firebase.firestore();



    let tableNumber = null;
    let currentQuestion = null;

    const answers = {
      1: "POVERTY",
      2: "DHA",
      3: "BRAIN",
      4: "SYNAPSE",
      5: "DHASURV"
    };
	
	const questions = [
	"1. Food _______ is the condition of not having enough food, or food of good enough quality, to meet a person’s basic nutritional needs.",
	"2. Which omega-3 fatty acid is critical for brain development?",
	"3. Aside from the retina, where can we find the highest concentration of docosahexaenoic acid (DHA) in the body?",
	"4. What is the name of the tiny gap or junction where one neuron sends signals to another cell?",
	"5. Complete the sentence: With Lactum 3+, we can help give the Filipino children the DHA they ________!"
	];


    window.setTable = function() {
      tableNumber = document.getElementById("tableNumber").value;
      if (!tableNumber || isNaN(tableNumber) || tableNumber < 1) { alert("Enter table number!"); return; }
      document.getElementById("setup").style.display = "none";
      document.getElementById("questions").style.display = "block";
    }

    window.showQuestion = function(num) {
  currentQuestion = num;
  document.querySelector(".question-text").textContent = questions[currentQuestion - 1];
  document.getElementById("questions").style.display = "none";
  document.getElementById("game").style.display = "block";
  startUnscramble(num);
  
	}
  

    window.closePopup = function() {
      document.getElementById("popup").style.display = "none";
    }
	
	window.goBack = function() {
  document.getElementById("game").style.display = "none";
  document.getElementById("questions").style.display = "block";
	}
	
function showPopup(message) {
  document.getElementById("popupMessage").textContent = message;
  document.getElementById("popup").style.display = "flex";
}

function closePopup() {
  document.getElementById("popup").style.display = "none";
}




  </script>
  <style>
  html, body {
  height: 90%;              /* stretch to full viewport */
  margin: 0;
  padding: 0;
}


body {
  min-height: 90vh;          /* always at least full screen height */
  background: linear-gradient(
    to bottom,
    #00008B 0%,   /* light blue from 0% */
    #ADD8E6 88%,  /* stays dark blue until 80% */
    #7CFC00 92%,  /* jumps to green at 80% */
    #008000 100%  /* stays green until 100% */
  );


  background-repeat: no-repeat; /* stop tiling */
  background-attachment: fixed; /* lock gradient to viewport */
  background-size: cover;       /* stretch gradient to cover entire screen */
  display: flex;
  flex-direction: column;
  align-items: center;
  font-family: 'Inter', sans-serif;
  margin: 0;
  padding: 20px;
  text-align: center;
  

}

	
	
    .logo {
		width: 120px;       /* control width */
		height: auto;       /* let height adjust naturally */
		margin-bottom: 10px;
	}

    input, textarea {
      width: 90%;
      max-width: 400px;
      padding: 10px;
      margin: 10px 0;
      font-size: 16px;
    }
    button {
  font-size: 1.2em;       /* scales with screen */
  padding: 10px 20px;
  margin: 10px;
  border: none;
  border-radius: 8px;
  background-color:  #ff131c;
  color: white;
  font-weight: bold;
}

    button:hover {
      opacity: 0.85;
    }
    img {
      max-width: 90%;
      height: auto;
      margin: 15px 0;
    }
	
	#scrambleText {
	margin: 20px 0;
	text-align: center;
	}

	.scramble-letter {
  display: inline-block;
  font-size: 32px;
  font-weight: bold;
  color: white; /* fill stays visible */
  text-shadow: 
    -2px -2px 0 black,
     2px -2px 0 black,
    -2px  2px 0 black,
     2px  2px 0 black; /* outline effect */
  margin: 5px;
}
	
  .question-title {
  text-align: center;
  font-weight: bold;
  color: white;
  font-size: 20px;
  margin-bottom: 15px;
  }
  
  #answerBox {
  font-size: 1.2em;
  padding: 8px;
  width: 80%;            /* responsive width */
  max-width: 400px;
  margin: 15px auto;
  display: block;
}

.version-text {
  position: fixed;       /* stays in place */
  bottom: 5px;           /* near the bottom edge */
  left: 50%;             /* center horizontally */
  transform: translateX(-50%); /* true centering */
  font-size: 10px;       /* tiny text */
  font-weight: bold;     /* readable */
  color: white;          /* matches your theme */
  opacity: 0.8;          /* subtle but visible */
  margin: 0;
}

.question-text {
  font-size: 18px;        /* readable size */
  font-weight: bold;      /* emphasis */
  color: red;           /* matches your theme */
  text-align: center;     /* centered above letters */
  margin-bottom: 15px;    /* spacing before scrambled letters */
}

#backButton {
  background-color: #b5b5b5; /* dark grey */
  color: white;
  border: none;
  border-radius: 10px; /* slightly rounded */
  padding: 6px 12px; /* smaller size */
  font-size: 14px;   /* smaller text */
  cursor: pointer;
  margin: 10px;
  transition: background-color 0.3s ease;
}

#backButton:hover {
  background-color: #555555; /* lighter grey on hover */
}

#answerArea {
	font-size: 2em;
	font-weight: bold;
	color: red;
  letter-spacing: 0.2em; /* adds space */

}

/* Overlay */
.popup {
  display: none;              /* hidden by default */
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.7); /* semi-transparent black */
  display: flex;              /* center content */
  justify-content: center;
  align-items: center;
  z-index: 9999;              /* make sure it’s on top */
}

/* Popup box */
.popup-content {
  background: #333;           /* dark grey box */
  color: white;
  padding: 20px;
  border-radius: 10px;
  text-align: center;
  min-width: 200px;
}

.popup-content button {
  margin-top: 10px;
  padding: 6px 12px;
  background: #FF0000; /* red button */
  border: none;
  border-radius: 8px;
  color: white;
  cursor: pointer;
}



  /* Center the setup area */
  #setup {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 50vh; /* full screen height */
    background: white;
    border-radius: 20px;
    max-width: 400px;
    margin: auto;
    padding: 40px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.4);
    text-align: center;
  }

  /* Heading text */
  #setup h2 {
    color: red;
    margin-bottom: 0px;
	padding: 10px;
	border: 3px solid red;
	border-radius: 12px;
  }
  
  #setup h4 {
    color: red;
    margin-bottom: 0px;
  }

  /* Input styling */
  #setup input {
    background: white;
    color: red;
    border: 1px solid red;
    border-radius: 10px;
    padding: 10px;
    width: 80%;
    font-size: 16px;
	font-weight: bold;
    text-align: center;
    margin-bottom: 20px;
  }

  /* Button styling */
  #setup button {
    background: red;
    color: white;
    border: none;
    border-radius: 10px;
    padding: 18px 28px;
    font-size: 16px;
    cursor: pointer;
    transition: background 0.3s ease;
  }

  #setup button:hover {
    background: darkred;
  }
  
  #questions {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 60vh; /* full screen height */
    background: white;
    border-radius: 20px;
    max-width: 400px;
    margin: auto;
    padding: 10px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.4);
    text-align: center;
  }
  
  #questions button {
    font-size: 1.2em;       /* scales with screen */
  padding: 10px 90px;
  margin: 10px;
  border: none;
  border-radius: 8px;
  background-color:  red;
  color: white;
  font-weight: bold;
  }
  
  #questions h2 {
  font-size: 1.1em;
    color: red;
    margin-bottom: 0px;
	padding: 5px;
	border: 3px solid red;
	border-radius: 12px;
  }
  
  #game {
	display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 60vh; /* full screen height */
    background: white;
    border-radius: 20px;
    max-width: 400px;
    margin: auto;
    padding: 10px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.4);
    text-align: center;
  }
  
  #game h4 {
  font-color: red;
  }

.logo-banner {
  position: fixed;   /* pin to the very top */
  top: 0;
  width: 120%;       /* stretch edge-to-edge */
  text-align: center;/* center the image inside */
  z-index: 1000;
  padding: 0;
  margin: 0;
}

.logo-banner img {
  width: 100%;       /* make the banner image span full width */
  height: auto;      /* keep proportions */
  display: block;    /* removes inline spacing */
  margin: 0 auto;    /* ensures centered if not full width */
}





  </style>
</head>
<body>
  <!-- Logo always on top -->
<div class="logo-banner">
  <img src="logo.png" alt="Logo">
</div>
  

<!-- Setup -->
<div id="setup">

  <h2>Welcome to DHA Challenge!</h2><br>
  <h4>Please enter your table number:</h4>
  <input 
    type="number" 
    id="tableNumber" 
    min="1" 
    step="1" 
    placeholder="Enter table number">
  <button onclick="setTable()">Next</button>
</div>


<!-- Questions -->
<div id="questions" style="display:none;">
  <p class="question-title"><h2>Please wait for the host's prompt before selecting a question</h2></p>
  <button class="white-button" onclick="showQuestion(1)">Question 1</button> <br>
  <button class="white-button" onclick="showQuestion(2)">Question 2</button> <br>
  <button class="white-button" onclick="showQuestion(3)">Question 3</button> <br>
  <button class="white-button" onclick="showQuestion(4)">Question 4</button> <br>
  <button class="white-button" onclick="showQuestion(5)">Question 5</button> <br>
</div>


<!-- Game -->
<div id="game" style="display:none;">
  <div id="questionArea">
  <p class="question-text">Question will appear here</p>
  </div>
  	<h4>Press the letters in the correct order to form the answer!</h4>
    <div id="unscrambleArea"></div><br>

	<div id="answerArea">---</div>
	<br>
<button id="backButton" onclick="goBack()">Back to Questions</button> <br>
</div>

<div id="popup" class="popup" style="display:none;">
  <div class="popup-content">
    <p id="popupMessage"></p>
    <button onclick="closePopup()">OK</button>
  </div>
</div>




<p class="version-text">v10</p>

</body>
</html>